(window.webpackJsonp=window.webpackJsonp||[]).push([[26,32],{140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(24),o=n(273),i=n(67);t.default=function(e){var t=Object(s.c)((function(e){return e.translation}));return r.a.createElement(o.a,{show:!0,onHide:e.onCancel},r.a.createElement(o.a.Header,null,r.a.createElement(o.a.Title,null,e.title)),r.a.createElement(o.a.Body,null,e.body),r.a.createElement(o.a.Footer,null,r.a.createElement(i.a,{variant:"success",size:"sm",onClick:e.onConfirm},t.COMMON.YES),r.a.createElement(i.a,{variant:"outline-dark",size:"sm",onClick:e.onCancel},t.COMMON.CANCEL)))}},151:function(e,t,n){"use strict";n.r(t);var a=n(44),r=n.n(a),s=n(45),o=n.n(s),i=n(46),c=n.n(i),l=n(47),u=n.n(l),m=n(48),d=n.n(m),f=n(19),v=n.n(f),E=n(0),C=n.n(E),h=n(24),p=n(266),N=n.n(p),g=n(250),y=n(249),O=n(59),S=n(105),k=n(10),I=n(12),w=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.conversation,n=e.userId,a=e.users,r=e.translation,s=e.history,o=e.showPictureModal,i=e.showDeleteConfirmation,c=t.messages.filter((function(e){return!e.deleted})),l=c.filter((function(e){return!e.read&&e.from._id!==n})),u=c.length>0?c[c.length-1]:null,m=u&&!u.read?"unread-message":"",d=function(){s.push("/conversation?".concat(N.a.stringify({convId:t._id})))};return C.a.createElement("tr",{key:t._id,className:l.length>0?"new-messages-bg":""},C.a.createElement("td",{className:"conversation-td"},C.a.createElement(g.a,{noGutters:!0},C.a.createElement(y.a,{xs:7,sm:10},C.a.createElement(_,{history:s,convId:t._id,userId:n,conversation:t,showPictureModal:o,users:a}),u&&C.a.createElement(g.a,{className:"message-preview d-none d-sm-flex",onClick:d},C.a.createElement(y.a,{xs:4,sm:2,className:"user-from-text",style:{paddingRight:0}},u.from.username,":"),C.a.createElement(y.a,{xs:8,sm:8,style:{paddingLeft:10}},C.a.createElement("div",{className:"conversation-text ".concat(m)},u.text)))),C.a.createElement(y.a,{xs:5,sm:2,className:"conversation-actions",onClick:d},l.length>0&&C.a.createElement(S.a,{variant:"success",style:{marginRight:15}},l.length),Object(I.timestampToHumanDate)(t.timestamp,!1,r),C.a.createElement("i",{className:"far fa-trash-alt",title:r.CONVERSATIONS.DELETE,style:{paddingLeft:10},onClick:function(e){return i(e,t._id)}}))),u&&C.a.createElement(g.a,{className:"message-preview d-flex d-sm-none",onClick:d},C.a.createElement(y.a,{xs:4,sm:2,className:"user-from-text"},u.from.username,":"),C.a.createElement(y.a,{xs:8,sm:8,style:{paddingLeft:10}},C.a.createElement("div",{className:"conversation-text ".concat(m)},u.text)))))}}]),t}(C.a.PureComponent);v()(w,"displayName","ConversationPreview"),t.default=Object(h.b)((function(e){return{user:e.authentication.user,users:e.users.users,translation:e.translation}}),{})(w);var _=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.history,n=e.convId,a=e.conversation,r=e.userId,s=e.users,o=e.showPictureModal,i=a.users.map((function(e){return e._id})),c=s.filter((function(e){return i.includes(e._id)}));c.length>1&&(c=c.filter((function(e){return e._id!==r})));var l,u=c[0];l=1===c.length?u.pictureUrl?u.pictureUrl:"/images/default-profile.jpg":"/images/conversation-group.jpg";return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"profile-picture-wrapper"},1===c.length?C.a.createElement(O.a,{roundedCircle:!0,style:u.online?k.ONLINE_STYLE:{},className:"profile-picture",src:l,onClick:function(){return o(l)}}):C.a.createElement(O.a,{roundedCircle:!0,style:c.some((function(e){return e.online}))?k.ONLINE_STYLE:{},className:"profile-picture",src:l,onClick:function(){return o(l)}})),C.a.createElement("div",{style:{color:"#343a40"},onClick:function(){t.push("/conversation?".concat(N.a.stringify({convId:n})))}},1===c.length?C.a.createElement("strong",null,u.username):C.a.createElement("div",{className:"cut-senders-text"},c.map((function(e){return C.a.createElement("strong",{key:e._id,style:e.online?{color:k.MAIN_COLOR}:{}},e.username)})).reduce((function(e,t){return[e,", ",t]})))))}}]),t}(C.a.PureComponent);v()(_,"displayName","SenderInfo")},162:function(e,t,n){"use strict";n.r(t);var a=n(44),r=n.n(a),s=n(45),o=n.n(s),i=n(46),c=n.n(i),l=n(47),u=n.n(l),m=n(40),d=n.n(m),f=n(48),v=n.n(f),E=n(19),C=n.n(E),h=n(0),p=n.n(h),N=n(24),g=n(253),y=n(250),O=n(249),S=n(259),k=n(251),I=n(273),w=n(267),_=n(260),P=n(67),b=n(59),x=n(49),T=n(140),L=n(151),M=n(60),R=function(e){function t(e){var n;return r()(this,t),n=c()(this,u()(t).call(this,e)),C()(d()(n),"state",void 0),C()(d()(n),"onSearch",(function(e){if(""===e)n.setState({filteredConversations:n.props.conversations});else{var t=n.props.conversations.filter((function(t){return t.users.filter((function(t){return-1!==t.username.toLowerCase().indexOf(e.toLowerCase())})).length>0||-1!=="".concat(t.messages.map((function(e){return e.text})).join(" ")).toLowerCase().indexOf(e.toLowerCase())}));n.setState({filteredConversations:t})}})),C()(d()(n),"createConversation",(function(){return n.props.history.push("/create-conversation")})),C()(d()(n),"showPictureModal",(function(e){return n.setState({clickedPicture:e})})),C()(d()(n),"hidePictureModal",(function(){return n.setState({clickedPicture:""})})),C()(d()(n),"showDeleteConfirmation",(function(e,t){e.stopPropagation(),n.setState({deleteConversationId:t})})),C()(d()(n),"hideDeleteConfirmation",(function(){return n.setState({deleteConversationId:""})})),C()(d()(n),"deleteConversation",(function(){n.props.deleteConversation(n.state.deleteConversationId),n.hideDeleteConfirmation()})),n.state={conversations:[],filteredConversations:[],clickedPicture:"",deleteConversationId:""},n}return v()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.getConversationsByUser(this.props.user._id)}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.isConversationsLoaded,r=t.translation,s=t.history,o=this.state.filteredConversations,i=[];return i=a?0===o.length?p.a.createElement(w.a,{className:"text-center"},p.a.createElement("p",null,r.CONVERSATIONS.NO_CONVERSATIONS)):p.a.createElement(_.a,{hover:!0},p.a.createElement("tbody",null,o.map((function(t){return p.a.createElement(L.default,{key:t._id,userId:n._id,conversation:t,history:s,showPictureModal:e.showPictureModal,showDeleteConfirmation:e.showDeleteConfirmation})})))):p.a.createElement("div",{style:{paddingTop:"50vh"}},p.a.createElement(M.default,null)),p.a.createElement(g.a,{fluid:!0},p.a.createElement(y.a,null,p.a.createElement(O.a,{md:{span:10,offset:1},lg:{span:8,offset:2}},p.a.createElement("div",{className:"header"},p.a.createElement("div",{style:{color:"grey"}},p.a.createElement(S.a,{size:"sm",className:"search-container"},p.a.createElement(S.a.Prepend,null,p.a.createElement("i",{className:"fas fa-search"})),p.a.createElement(k.a.Control,{placeholder:r.CONVERSATIONS.SEARCH_IN_CONVERSATIONS,"aria-label":"Search conversations","aria-describedby":"search",className:"search-input",onChange:function(t){return e.onSearch(t.target.value)}}))),p.a.createElement(P.a,{variant:"outline-dark",size:"sm",className:"create-btn d-none d-sm-block",onClick:function(){return e.createConversation()}},p.a.createElement("i",{className:"fa fa-comments fa-lg",style:{marginRight:8}}),r.CONVERSATIONS.NEW_CONVERSATION),p.a.createElement(P.a,{variant:"outline-dark",className:"d-block d-sm-none btn-mobile-icon",title:r.CONVERSATIONS.NEW_CONVERSATION,onClick:function(){return e.createConversation()}},p.a.createElement("i",{className:"fa fa-comments fa-lg"}))),i,this.state.clickedPicture&&p.a.createElement(I.a,{show:null!==this.state.clickedPicture,className:"profile-modal",onHide:this.hidePictureModal},p.a.createElement(I.a.Body,{style:{textAlign:"center"}},p.a.createElement(b.a,{className:"profile-modal-picture",src:this.state.clickedPicture}))),this.state.deleteConversationId&&p.a.createElement(T.default,{title:r.COMMON.DELETE_CONFIRMATION,body:r.CONVERSATIONS.DELETE_CONFIRMATION,onConfirm:function(){return e.deleteConversation()},onCancel:function(){return e.hideDeleteConfirmation()}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.conversations!==t.conversations?{conversations:e.conversations,filteredConversations:e.conversations}:null}}]),t}(p.a.PureComponent);t.default=Object(N.b)((function(e){return{user:e.authentication.user,conversations:e.conversations.conversations,isConversationsLoaded:e.conversations.isConversationsLoaded,translation:e.translation}}),{getConversationsByUser:x.getConversationsByUser,deleteConversation:x.deleteConversation})(R)}}]);