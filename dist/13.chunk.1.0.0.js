(window.webpackJsonp=window.webpackJsonp||[]).push([[13,32,33],{140:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(24),l=t(273),i=t(67);a.default=function(e){var a=Object(s.c)((function(e){return e.translation}));return n.a.createElement(l.a,{show:!0,onHide:e.onCancel},n.a.createElement(l.a.Header,null,n.a.createElement(l.a.Title,null,e.title)),n.a.createElement(l.a.Body,null,e.body),n.a.createElement(l.a.Footer,null,n.a.createElement(i.a,{variant:"success",size:"sm",onClick:e.onConfirm},a.COMMON.YES),n.a.createElement(i.a,{variant:"outline-dark",size:"sm",onClick:e.onCancel},a.COMMON.CANCEL)))}},144:function(e,a,t){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!(0===e.length||e.length>=3)&&(e.length<3||void 0)}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!(0===e.length||a.test(e))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!(0===e.length||e.length>=5&&/^\S*$/.test(e))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return 0!==e.length&&0!==a.length&&e!==a}t.r(a),t.d(a,"isUsernameInvalid",(function(){return r})),t.d(a,"isEmailInvalid",(function(){return n})),t.d(a,"isPasswordInvalid",(function(){return s})),t.d(a,"isConfirmPasswordInvalid",(function(){return l}))},166:function(e,a,t){"use strict";t.r(a);var r=t(44),n=t.n(r),s=t(45),l=t.n(s),i=t(46),o=t.n(i),c=t(47),d=t.n(c),u=t(40),m=t.n(u),f=t(48),p=t.n(f),b=t(19),E=t.n(b),v=t(0),h=t.n(v),O=t(24),N=t(64),P=t.n(N),C=t(15),w=t.n(C),I=t(253),R=t(250),y=t(249),j=t(251),g=t(267),x=t(59),S=t(67),U=t(13),A=t(31),F=t(21),k=t(12),_=t(144),D=t(60),L=t(140),M=t(10),T=function(e){function a(e){var t;n()(this,a),t=o()(this,d()(a).call(this,e)),E()(m()(t),"state",void 0),E()(m()(t),"handleChange",(function(e){var a=e.target,r=a.name,n=a.value;t.setState(E()({},r,n))})),E()(m()(t),"loadPictureFromApi",(function(e){P()(e).login().then((function(){return P()(e).api("me")})).then((function(e){t.setState({pictureUrl:e.thumbnail})}))})),E()(m()(t),"savePicture",(function(){var e=t.props.user,a=t.state.pictureUrl;t.props.editUser(e._id,{pictureUrl:a})})),E()(m()(t),"saveBasic",(function(){var e=t.props.user,a=t.state,r=a.username,n=a.email;t.props.editUser(e._id,{username:r,email:n})})),E()(m()(t),"savePassword",(function(){var e=t.props.user,a=t.state.newPassword;t.props.editUser(e._id,{password:Object(k.encryptPassword)(a)})})),E()(m()(t),"showDeleteConfirmation",(function(){return t.setState({showDeleteConfirmation:!0})})),E()(m()(t),"hideDeleteConfirmation",(function(){return t.setState({showDeleteConfirmation:!1})})),E()(m()(t),"deleteProfile",(function(){t.props.deleteUser(t.props.user._id),t.props.setUser(null),t.props.history.push("/login"),t.hideDeleteConfirmation()})),E()(m()(t),"onImageUpload",(function(e){t.setState({pictureUploading:!0});var a=new FormData;a.append("image",e[0]);var r={headers:{"Content-Type":"multipart/form-data",Authorization:"Client-ID ".concat(M.IMGUR_CLIENT_ID)}};w.a.post("https://api.imgur.com/3/image",a,r).then((function(e){var a=e.data.data?e.data.data.link:"";t.setState({pictureUrl:a,pictureUploading:!1})})).catch((function(){t.setState({pictureUploading:!1}),t.props.alertError(t.props.translation.ACCOUNT.PROFILE_PICTURE.UPLOAD_FAIL)}))})),E()(m()(t),"isBasicFormInvalid",(function(){var e=t.props.user,a=t.state,r=a.username,n=a.email;return Object(_.isUsernameInvalid)(r)||t.suchUsernameExist(r)||Object(_.isEmailInvalid)(n)||t.suchEmailExist(n)||e.username===r&&e.email===n})),E()(m()(t),"suchUsernameExist",(function(e){return e?t.props.users.filter((function(e){return!e.oauth&&t.props.user._id!==e._id})).some((function(a){return a.username===e})):null})),E()(m()(t),"suchEmailExist",(function(e){return e?t.props.users.filter((function(e){return!e.oauth&&t.props.user._id!==e._id})).some((function(a){return a.email===e})):null})),E()(m()(t),"isPasswordFormInvalid",(function(){var e=t.props.user,a=t.state,r=a.currentPassword,n=a.newPassword,s=a.confirmNewPassword;if(!n||!s)return!0;var l=r?Object(k.encryptPassword)(r):"";return Object(_.isConfirmPasswordInvalid)(e.password,l)||Object(_.isPasswordInvalid)(n)||Object(_.isConfirmPasswordInvalid)(n,s)||e.password===n}));var r=e.user;return t.state={username:r?r.username:"",email:r?r.email:"",pictureUrl:r?r.pictureUrl:"",currentPassword:"",newPassword:"",confirmNewPassword:"",showPasswords:!1,pictureUploading:!1,showDeleteConfirmation:!1},t}return p()(a,e),l()(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.username,r=a.email,n=a.pictureUrl,s=a.currentPassword,l=a.newPassword,i=a.confirmNewPassword,o=a.showPasswords,c=this.props,d=c.user,u=c.translation,m=u.ACCOUNT,f=m.PROFILE_PICTURE,p=m.USERNAME_EMAIL,b=m.PASSWORD,E=s?Object(k.encryptPassword)(s):"";return h.a.createElement(I.a,{fluid:!0},h.a.createElement(R.a,null,h.a.createElement(y.a,{md:{span:8,offset:2},lg:{span:6,offset:3}},h.a.createElement(j.a,null,d.oauth?null:h.a.createElement(h.a.Fragment,null,h.a.createElement(W,{header:f.PICTURE},h.a.createElement(x.a,{thumbnail:!0,className:"user-picture",style:this.state.pictureUploading?{opacity:.4}:{},src:n||"/images/default-profile.jpg"}),h.a.createElement(j.a.Group,{controlId:"pictureUrl",style:{marginBottom:5}},h.a.createElement(j.a.Control,{type:"file",accept:"image/*",onChange:function(a){return e.onImageUpload(a.target.files)}}),this.state.pictureUploading&&h.a.createElement(D.default,null),h.a.createElement("div",{className:"or-wrapper"},h.a.createElement("hr",{className:"or-hr"}),h.a.createElement("span",{className:"or-span"},f.OR_USE_FROM),h.a.createElement("hr",{className:"or-hr"})),h.a.createElement(j.a.Row,null,h.a.createElement(y.a,{xs:12,md:6},h.a.createElement(S.a,{block:!0,size:"sm",className:"btn-google",onClick:function(){return e.loadPictureFromApi("google")}},h.a.createElement("i",{className:"fab fa-google",style:{paddingRight:8}}),"Google ",f.PROFILE)),h.a.createElement(y.a,{xs:12,md:6},h.a.createElement(S.a,{block:!0,size:"sm",className:"btn-facebook",onClick:function(){return e.loadPictureFromApi("facebook")}},h.a.createElement("i",{className:"fab fa-facebook-f",style:{paddingRight:8}}),"Facebook ",f.PROFILE)))),h.a.createElement("div",{className:"pt-1 d-inline-block"},h.a.createElement(S.a,{variant:d.pictureUrl===n?"outline-success":"success",size:"sm",disabled:d.pictureUrl===n,onClick:function(){return e.savePicture()}},u.COMMON.SAVE))),h.a.createElement(W,{header:p.USERNAME_AND_EMAIL},h.a.createElement(j.a.Group,{controlId:"username"},h.a.createElement(j.a.Label,null,p.USERNAME),h.a.createElement(j.a.Control,{name:"username",placeholder:p.USERNAME,isInvalid:Object(_.isUsernameInvalid)(t)||this.suchUsernameExist(t),value:t,onChange:this.handleChange}),h.a.createElement(j.a.Control.Feedback,{type:"invalid"},Object(_.isUsernameInvalid)(t)&&p.ERRORS.USERNAME_MIN_LENGTH,this.suchUsernameExist(t)&&p.ERRORS.USERNAME_EXIST)),h.a.createElement(j.a.Group,{controlId:"email"},h.a.createElement(j.a.Label,null,p.EMAIL),h.a.createElement(j.a.Control,{name:"email",type:"email",placeholder:p.EMAIL,isInvalid:Object(_.isEmailInvalid)(r)||this.suchEmailExist(r),value:r,onChange:this.handleChange}),h.a.createElement(j.a.Control.Feedback,{type:"invalid"},Object(_.isEmailInvalid)(r)&&p.ERRORS.EMAIL_INVALID,this.suchEmailExist(r)&&p.ERRORS.EMAIL_EXIST)),h.a.createElement("div",{className:"pt-1 d-inline-block"},h.a.createElement(S.a,{variant:this.isBasicFormInvalid()?"outline-success":"success",size:"sm",disabled:this.isBasicFormInvalid(),onClick:function(){return e.saveBasic()}},u.COMMON.SAVE))),h.a.createElement(W,{header:b.PASSWORD},h.a.createElement(j.a.Group,{controlId:"current-password",className:"mb-1"},h.a.createElement(j.a.Label,null,b.CURRENT_PASSWORD),h.a.createElement(j.a.Control,{name:"currentPassword",type:o?"text":"password",placeholder:b.CURRENT_PASSWORD,isInvalid:Object(_.isConfirmPasswordInvalid)(d.password,E),value:s,onChange:this.handleChange}),h.a.createElement(j.a.Control.Feedback,{type:"invalid"},b.ERRORS.CURRENT_PASSWORD_INVALID)),h.a.createElement(j.a.Group,{controlId:"showPassword",style:{fontSize:"90%",color:"grey"}},h.a.createElement("div",{className:"cursor",onClick:function(){return e.setState({showPasswords:!o})}},h.a.createElement("i",{className:"".concat(o?"far fa-eye-slash":"far fa-eye"," pr-1")}),o?this.props.translation.AUTH.HIDE_PASSWORDS:this.props.translation.AUTH.SHOW_PASSWORDS)),h.a.createElement(j.a.Group,{controlId:"new-password"},h.a.createElement(j.a.Label,null,b.NEW_PASSWORD),h.a.createElement(j.a.Control,{name:"newPassword",type:o?"text":"password",placeholder:b.NEW_PASSWORD,isInvalid:Object(_.isPasswordInvalid)(l),value:l,onChange:this.handleChange}),h.a.createElement(j.a.Control.Feedback,{type:"invalid"},b.ERRORS.NEW_PASSWORD_INVALID)),h.a.createElement(j.a.Group,{controlId:"confirm-password"},h.a.createElement(j.a.Label,null,b.CONFIRM_NEW_PASSWORD),h.a.createElement(j.a.Control,{name:"confirmNewPassword",type:o?"text":"password",placeholder:b.CONFIRM_NEW_PASSWORD,isInvalid:Object(_.isConfirmPasswordInvalid)(l,i),value:i,onChange:this.handleChange}),h.a.createElement(j.a.Control.Feedback,{type:"invalid"},b.ERRORS.PASSWORDS_NOT_MATCH)),h.a.createElement("div",{className:"pt-1 d-inline-block"},h.a.createElement(S.a,{variant:this.isPasswordFormInvalid()?"outline-success":"success",size:"sm",disabled:this.isPasswordFormInvalid(),onClick:function(){return e.savePassword()}},u.COMMON.SAVE)))),h.a.createElement("div",{className:"text-center",style:{marginBottom:10}},h.a.createElement(S.a,{variant:"danger",size:"sm",block:!0,className:"mb-4",onClick:function(){return e.showDeleteConfirmation()}},h.a.createElement("i",{className:"fas fa-trash",style:{marginRight:5}})," ",u.ACCOUNT.DELETE_PROFILE))),this.state.showDeleteConfirmation&&h.a.createElement(L.default,{title:u.COMMON.DELETE_CONFIRMATION,body:u.ACCOUNT.DELETE_PROFILE_CONFIRMATION,onConfirm:function(){return e.deleteProfile()},onCancel:function(){return e.hideDeleteConfirmation()}}))))}}]),a}(h.a.Component);a.default=Object(O.b)((function(e){return{user:e.authentication.user,users:e.users.users,translation:e.translation}}),{editUser:A.editUser,deleteUser:A.deleteUser,setUser:F.setUser,alertError:U.alertError})(T);var W=function(e){var a=h.a.createElement(h.a.Fragment,null,h.a.createElement("h5",{className:"text-center text-dark"},e.header),h.a.createElement("hr",{style:{margin:"0 0 10px 0"}}));return h.a.createElement(g.a,{className:"my-jumbotron"},a,e.children)}},249:function(e,a,t){"use strict";var r=t(2),n=t(3),s=t(4),l=t.n(s),i=t(0),o=t.n(i),c=t(5),d=["xl","lg","md","sm","xs"],u=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.className,i=e.as,u=void 0===i?"div":i,m=Object(n.a)(e,["bsPrefix","className","as"]),f=Object(c.b)(t,"col"),p=[],b=[];return d.forEach((function(e){var a,t,r,n=m[e];if(delete m[e],null!=n&&"object"==typeof n){var s=n.span;a=void 0===s||s,t=n.offset,r=n.order}else a=n;var l="xs"!==e?"-"+e:"";null!=a&&p.push(!0===a?""+f+l:""+f+l+"-"+a),null!=r&&b.push("order"+l+"-"+r),null!=t&&b.push("offset"+l+"-"+t)})),p.length||p.push(f),o.a.createElement(u,Object(r.a)({},m,{ref:a,className:l.a.apply(void 0,[s].concat(p,b))}))}));u.displayName="Col",a.a=u},250:function(e,a,t){"use strict";var r=t(2),n=t(3),s=t(4),l=t.n(s),i=t(0),o=t.n(i),c=t(5),d=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.noGutters,i=e.as,d=void 0===i?"div":i,u=e.className,m=Object(n.a)(e,["bsPrefix","noGutters","as","className"]),f=Object(c.b)(t,"row");return o.a.createElement(d,Object(r.a)({ref:a},m,{className:l()(u,f,s&&"no-gutters")}))}));d.defaultProps={noGutters:!1},a.a=d},251:function(e,a,t){"use strict";var r=t(2),n=t(3),s=t(4),l=t.n(s),i=t(0),o=t.n(i),c=(t(142),t(1)),d=t.n(c),u={type:d.a.string.isRequired,as:d.a.elementType},m=o.a.forwardRef((function(e,a){var t=e.as,s=void 0===t?"div":t,i=e.className,c=e.type,d=Object(n.a)(e,["as","className","type"]);return o.a.createElement(s,Object(r.a)({},d,{ref:a,className:l()(i,c&&c+"-feedback")}))}));m.displayName="Feedback",m.propTypes=u,m.defaultProps={type:"valid"};var f=m,p=o.a.createContext({controlId:void 0}),b=t(5),E=o.a.forwardRef((function(e,a){var t=e.id,s=e.bsPrefix,c=e.bsCustomPrefix,d=e.className,u=e.isValid,m=e.isInvalid,f=e.isStatic,E=e.as,v=void 0===E?"input":E,h=Object(n.a)(e,["id","bsPrefix","bsCustomPrefix","className","isValid","isInvalid","isStatic","as"]),O=Object(i.useContext)(p),N=O.controlId;return s=O.custom?Object(b.b)(c,"custom-control-input"):Object(b.b)(s,"form-check-input"),o.a.createElement(v,Object(r.a)({},h,{ref:a,id:t||N,className:l()(d,s,u&&"is-valid",m&&"is-invalid",f&&"position-static")}))}));E.displayName="FormCheckInput",E.defaultProps={type:"checkbox"};var v=E,h=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.bsCustomPrefix,c=e.className,d=e.htmlFor,u=Object(n.a)(e,["bsPrefix","bsCustomPrefix","className","htmlFor"]),m=Object(i.useContext)(p),f=m.controlId;return t=m.custom?Object(b.b)(s,"custom-control-label"):Object(b.b)(t,"form-check-label"),o.a.createElement("label",Object(r.a)({},u,{ref:a,htmlFor:d||f,className:l()(c,t)}))}));h.displayName="FormCheckLabel";var O=h,N=o.a.forwardRef((function(e,a){var t=e.id,s=e.bsPrefix,c=e.bsCustomPrefix,d=e.inline,u=e.disabled,m=e.isValid,E=e.isInvalid,h=e.feedback,N=e.className,P=e.style,C=e.title,w=e.type,I=e.label,R=e.children,y=e.custom,j=e.as,g=void 0===j?"input":j,x=Object(n.a)(e,["id","bsPrefix","bsCustomPrefix","inline","disabled","isValid","isInvalid","feedback","className","style","title","type","label","children","custom","as"]),S="switch"===w||y;s=S?Object(b.b)(c,"custom-control"):Object(b.b)(s,"form-check");var U=Object(i.useContext)(p).controlId,A=Object(i.useMemo)((function(){return{controlId:t||U,custom:S}}),[U,S,t]),F=null!=I&&!1!==I&&!R,k=o.a.createElement(v,Object(r.a)({},x,{type:"switch"===w?"checkbox":w,ref:a,isValid:m,isInvalid:E,isStatic:!F,disabled:u,as:g}));return o.a.createElement(p.Provider,{value:A},o.a.createElement("div",{style:P,className:l()(N,s,S&&"custom-"+w,d&&s+"-inline")},R||o.a.createElement(o.a.Fragment,null,k,F&&o.a.createElement(O,{title:C},I),(m||E)&&o.a.createElement(f,{type:m?"valid":"invalid"},h))))}));N.displayName="FormCheck",N.defaultProps={type:"checkbox",inline:!1,disabled:!1,isValid:!1,isInvalid:!1,title:""},N.Input=v,N.Label=O;var P=N,C=(t(8),o.a.forwardRef((function(e,a){var t,s,c=e.bsPrefix,d=e.type,u=e.size,m=e.id,f=e.className,E=e.isValid,v=e.isInvalid,h=e.plaintext,O=e.readOnly,N=e.as,P=void 0===N?"input":N,C=Object(n.a)(e,["bsPrefix","type","size","id","className","isValid","isInvalid","plaintext","readOnly","as"]),w=Object(i.useContext)(p).controlId;if(c=Object(b.b)(c,"form-control"),h)(s={})[c+"-plaintext"]=!0,t=s;else if("file"===d){var I;(I={})[c+"-file"]=!0,t=I}else{var R;(R={})[c]=!0,R[c+"-"+u]=u,t=R}return o.a.createElement(P,Object(r.a)({},C,{type:d,ref:a,readOnly:O,id:m||w,className:l()(f,t,E&&"is-valid",v&&"is-invalid")}))})));C.displayName="FormControl",C.Feedback=f;var w=C,I=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.className,c=e.children,d=e.controlId,u=e.as,m=void 0===u?"div":u,f=Object(n.a)(e,["bsPrefix","className","children","controlId","as"]);t=Object(b.b)(t,"form-group");var E=Object(i.useMemo)((function(){return{controlId:d}}),[d]);return o.a.createElement(p.Provider,{value:E},o.a.createElement(m,Object(r.a)({},f,{ref:a,className:l()(s,t)}),c))}));I.displayName="FormGroup";var R=I,y=t(249),j=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.column,c=e.srOnly,d=e.className,u=e.htmlFor,m=Object(n.a)(e,["bsPrefix","column","srOnly","className","htmlFor"]),f=Object(i.useContext)(p).controlId;t=Object(b.b)(t,"form-label");var E=l()(d,t,c&&"sr-only",s&&"col-form-label");return u=u||f,s?o.a.createElement(y.a,Object(r.a)({as:"label",className:E,htmlFor:u},m)):o.a.createElement("label",Object(r.a)({ref:a,className:E,htmlFor:u},m))}));j.displayName="FormLabel",j.defaultProps={column:!1,srOnly:!1};var g=j,x=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.className,i=e.as,c=void 0===i?"small":i,d=e.muted,u=Object(n.a)(e,["bsPrefix","className","as","muted"]);return t=Object(b.b)(t,"form-text"),o.a.createElement(c,Object(r.a)({},u,{ref:a,className:l()(s,t,d&&"text-muted")}))}));x.displayName="FormText";var S=x,U=o.a.forwardRef((function(e,a){return o.a.createElement(P,Object(r.a)({},e,{ref:a,type:"switch"}))}));U.displayName="Switch",U.Input=P.Input,U.Label=P.Label;var A=U,F=t(29),k=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.inline,i=e.className,c=e.validated,d=e.as,u=void 0===d?"form":d,m=Object(n.a)(e,["bsPrefix","inline","className","validated","as"]);return t=Object(b.b)(t,"form"),o.a.createElement(u,Object(r.a)({},m,{ref:a,className:l()(i,c&&"was-validated",s&&t+"-inline")}))}));k.displayName="Form",k.defaultProps={inline:!1},k.Row=Object(F.a)("form-row"),k.Group=R,k.Control=w,k.Check=P,k.Switch=A,k.Label=g,k.Text=S;a.a=k},253:function(e,a,t){"use strict";var r=t(2),n=t(3),s=t(4),l=t.n(s),i=t(0),o=t.n(i),c=t(5),d=o.a.forwardRef((function(e,a){var t=e.bsPrefix,s=e.fluid,i=e.as,d=void 0===i?"div":i,u=e.className,m=Object(n.a)(e,["bsPrefix","fluid","as","className"]),f=Object(c.b)(t,"container");return o.a.createElement(d,Object(r.a)({ref:a},m,{className:l()(u,s?f+"-fluid":f)}))}));d.displayName="Container",d.defaultProps={fluid:!1},a.a=d},267:function(e,a,t){"use strict";var r=t(2),n=t(3),s=t(0),l=t.n(s),i=t(4),o=t.n(i),c=t(5),d=l.a.forwardRef((function(e,a){var t,s=e.as,i=void 0===s?"div":s,d=e.className,u=e.fluid,m=e.bsPrefix,f=Object(n.a)(e,["as","className","fluid","bsPrefix"]),p=((t={})[m=Object(c.b)(m,"jumbotron")]=!0,t[m+"-fluid"]=u,t);return l.a.createElement(i,Object(r.a)({ref:a},f,{className:o()(d,p)}))}));d.defaultProps={fluid:!1},d.displayName="Jumbotron",a.a=d}}]);